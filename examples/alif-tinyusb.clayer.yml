# yaml-language-server: $schema=https://raw.githubusercontent.com/Open-CMSIS-Pack/devtools/tools/projmgr/2.3.0/tools/projmgr/schemas/clayer.schema.json
layer:
  description: TinyUSB with Alif Ensemble compatibility layer

  define:
    - CFG_TUSB_MCU: OPT_MCU_NONE
    - TUP_DCD_ENDPOINT_MAX: 4
    - TUD_OPT_RHPORT: 0
    - BOARD_TUD_MAX_SPEED: OPT_MODE_HIGH_SPEED
    - SECTION_USB_DMA_BUF: \"usb_dma_buf\"
    - CFG_TUSB_MEM_SECTION: __attribute__\(\(section\(SECTION_USB_DMA_BUF\)\)\)
    - CFG_TUSB_MEM_ALIGN: __attribute__\(\(aligned\(32\)\)\)

  groups:
    - group: Alif BSP
      files:
        - file: ../lib/tinyusb/hw/bsp/alif/family.c

    - group: TinyUSB
      files:
        - file: ../lib/tinyusb/src/tusb.c
        - file: ../lib/tinyusb/src/common/tusb_fifo.c
        - file: ../lib/tinyusb/hw/bsp/board.c
        - file: ../lib/tinyusb/src/host/usbh.c
        - file: ../lib/tinyusb/src/host/hub.c

  add-path:
    - ../lib/tinyusb/src
    - ../lib/tinyusb/hw
    - ../lib/tinyusb/hw/bsp/alif/boards/alif_e7_dk
    - .

